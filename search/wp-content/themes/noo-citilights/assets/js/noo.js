/**
 * NOO Site Script.
 *
 * Javascript used in NOO-Framework
 * This file contains base script used on the frontend of NOO theme.
 *
 * @package    NOO Framework
 * @subpackage NOO Site
 * @version    1.0.0
 * @author     Kan Nguyen <khanhnq@nootheme.com>
 * @copyright  Copyright (c) 2014, NooTheme
 * @license    http://opensource.org/licenses/gpl-2.0.php GPL v2 or later
 * @link       http://nootheme.com
 */
// =============================================================================
!function(a){var o=function(){var a=window,o="inner";return"innerWidth"in window||(o="client",a=document.documentElement||document.body),{width:a[o+"Width"],height:a[o+"Height"]}},n=function(){if(a(".navbar").length){var n=a(window),s=a("body"),e=a(".navbar").offset().top,t=0,r=0,i=a(".navbar-nav").outerHeight(),l=function(){if(o().width>992){var n=a(window),l=a(".navbar");if(l.hasClass("fixed-top")){var d="navbar-fixed-top";l.hasClass("shrinkable")&&!s.hasClass("one-page-layout")&&(d+=" navbar-shrink");var c=0;s.hasClass("admin-bar")&&(c=a("#wpadminbar").outerHeight());var h=e+i;if(s.hasClass("one-page-layout")&&(h=e),n.scrollTop()+c>h){if(l.hasClass("navbar-fixed-top"))return void(t=n.scrollTop());if(!l.hasClass("navbar-fixed-top")&&!l.hasClass("smart_scroll")||n.scrollTop()<t)return r=l.hasClass("shrinkable")?Math.max(Math.round(a(".navbar-nav").outerHeight()-(n.scrollTop()+c)+e),60):a(".navbar-nav").outerHeight(),s.hasClass("one-page-layout")&&(r=i),a(".navbar-wrapper").css({"min-height":r+"px"}),l.closest(".noo-header").css({position:"relative"}),l.css({"min-height":r+"px"}),l.find(".navbar-nav > li > a").css({"line-height":r+"px"}),l.find(".navbar-brand").css({height:r+"px"}),l.find(".navbar-brand img").css({"max-height":r+"px"}),l.find(".navbar-brand").css({"line-height":r+"px"}),l.find(".calling-info").css({"max-height":r+"px"}),l.addClass(d),s.hasClass("one-page-layout")?l.css("top",c):l.css("top",0-r).animate({top:c},300),void(t=n.scrollTop())}t=n.scrollTop(),l.removeClass(d),l.css({top:""}),a(".navbar-wrapper").css({"min-height":""}),l.closest(".noo-header").css({position:""}),l.css({"min-height":""}),l.find(".navbar-nav > li > a").css({"line-height":""}),l.find(".navbar-brand").css({height:""}),l.find(".navbar-brand img").css({"max-height":""}),l.find(".navbar-brand").css({"line-height":""}),l.find(".calling-info").css({"max-height":""})}}};if(n.bind("scroll",l).resize(l),s.hasClass("one-page-layout")){var d=0;s.hasClass("admin-bar")&&(d=a("#wpadminbar").outerHeight()),a('.navbar-scrollspy > .nav > li > a[href^="#"]').click(function(o){o.preventDefault();var n=a(this).attr("href").replace(/.*(?=#[^\s]+$)/,"");if(n&&a(n).length){var s=Math.max(0,a(n).offset().top);s=Math.max(0,s-(d+a(".navbar").outerHeight())+5),a("html, body").animate({scrollTop:s},{duration:800,easing:"easeInOutCubic",complete:window.reflow})}}),s.scrollspy({target:".navbar-scrollspy",offset:d+a(".navbar").outerHeight()}),a(window).resize(function(){s.scrollspy("refresh")})}}a(".noo-slider-revolution-container .noo-slider-scroll-bottom").click(function(o){o.preventDefault();var n=a(".noo-slider-revolution-container").outerHeight();a("html, body").animate({scrollTop:n},900,"easeInOutExpo")}),a("body").on("mouseenter",".masonry-style-elevated .masonry-portfolio.no-gap .masonry-item",function(){a(this).closest(".masonry-container").find(".masonry-overlay").show(),a(this).addClass("masonry-item-hover")}),a("body").on("mouseleave ",".masonry-style-elevated .masonry-portfolio.no-gap .masonry-item",function(){a(this).closest(".masonry-container").find(".masonry-overlay").hide(),a(this).removeClass("masonry-item-hover")}),a(".masonry").each(function(){var o=a(this),n=a(this).find(".masonry-container"),s=a(this).find(".masonry-filters a");n.isotope({itemSelector:".masonry-item",transitionDuration:"0.8s",masonry:{gutter:0}}),imagesLoaded(o,function(){n.isotope("layout")}),s.click(function(a){a.stopPropagation(),a.preventDefault();var s=jQuery(this);if(s.hasClass("selected"))return!1;o.find(".masonry-result h3").text(s.text());var e=s.closest("ul");e.find(".selected").removeClass("selected"),s.addClass("selected");var t={layoutMode:"masonry",transitionDuration:"0.8s",masonry:{gutter:0}},r=e.attr("data-option-key"),i=s.attr("data-option-value");i="false"===i?!1:i,t[r]=i,n.isotope(t)})}),a(window).scroll(function(){a(this).scrollTop()>500?a(".go-to-top").addClass("on"):a(".go-to-top").removeClass("on")}),a("body").on("click",".go-to-top",function(){return a("html, body").animate({scrollTop:0},800),!1}),a("body").on("click",".search-button",function(){return a(".searchbar").hasClass("hide")&&(a(".searchbar").removeClass("hide").addClass("show"),a(".searchbar #s").focus()),!1}),a("body").on("mousedown",a.proxy(function(o){var n=a(o.target);n.is(".searchbar")||0!==n.parents(".searchbar").length||a(".searchbar").removeClass("show").addClass("hide")},this)),a(document).on("click",".shop-loop-quickview",function(o){var n=a(this);n.addClass("loading"),a.post(nooL10n.ajax_url,{action:"woocommerce_quickview",product_id:a(this).data("product_id")},function(o){n.removeClass("loading"),$modal=a(o),a("body").append($modal),$modal.modal("show"),$modal.on("hidden.bs.modal",function(){$modal.remove()})}),o.preventDefault(),o.stopPropagation()})};a(document).ready(function(){n()}),a(document).bind("noo-layout-changed",function(){n()})}(jQuery);
